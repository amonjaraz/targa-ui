<html>
<head>
	<title>bigBusiness</title>

	<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

	<link rel="stylesheet" href="https://www.amcharts.com/lib/3/ammap.css" type="text/css" media="all" />
	<script src="https://www.amcharts.com/lib/3/ammap.js"></script>
	<script src="https://www.amcharts.com/lib/3/maps/js/worldLow.js"></script>

	<style type="text/css">
		#mapdiv {
		  background: #eee;
		}
	</style>

</head>

<body>
	<div id="mapdiv" style="width: 100%; height: 100%;"></div>


	<script type="text/javascript">
	/**
	 * Let's put an SVG icon into a variable so that we can reuse it for multiple markers
	 */
	var icon= "M21.25,8.375V28h6.5V8.375H21.25zM12.25,28h6.5V4.125h-6.5V28zM3.25,28h6.5V12.625h-6.5V28z";
	var markerScale = 0.5;
	// svg path for target icon
	var targetSVG = "M9,0C4.029,0,0,4.029,0,9s4.029,9,9,9s9-4.029,9-9S13.971,0,9,0z M9,15.93 c-3.83,0-6.93-3.1-6.93-6.93S5.17,2.07,9,2.07s6.93,3.1,6.93,6.93S12.83,15.93,9,15.93 M12.5,9c0,1.933-1.567,3.5-3.5,3.5S5.5,10.933,5.5,9S7.067,5.5,9,5.5 S12.5,7.067,12.5,9z";
	function draw()
	{
	 var canvas = document.getElementById('circle');
	   if (canvas.getContext)
	     {
	      var ctx = canvas.getContext('2d');  
	      var X = canvas.width / 2;
	      var Y = canvas.height / 2;
	      var R = 45;
	      ctx.beginPath();
	      ctx.arc(X, Y, R, 0, 2 * Math.PI, false);
	      ctx.lineWidth = 3;
	      ctx.strokeStyle = '#oo0000';
	      ctx.stroke();
	       ctx.fillStyle = 'green';
	       ctx.fill();
	      }
	 }


	
	var citys = [
					/*0*/[35.3332586,-119.169785, 'Bakersfield, CA'], 
					/*1*/[34.0203662,-118.9722372, 'Los Angeles, CA'], 
					/*2*/[41.8339043,-88.0123523, 'Chicago, IL'], 
					/*3*/[35.7902527,-97.6355324, 'Cushing, OK'],
					/*4*/[47.6919,-95.4311, 'ClearBrook, MN'],
					/*5*/[44.9708543,-93.401565, 'Minneapolis, MN'],
					/*6*/[46.8083, -100.7837, 'Bismarck, ND'],
					/*7*/[40.8206, -98.6001, 'Wood River, NE'],
					/*8*/[32.7767, -96.7970, 'Dallas, TX'],
					/*9*/[40.7426, -84.1052, 'Lima, OH'],
					/*10*/[42.2697, -104.7416, 'Guernsey, WY'],
					/*11*/[38.6270, -90.1994, 'St. Louis, MO'],
					/*12*/[29.7604, -95.3698, 'Houston, TX'],
					/*13*/[33.9137, -98.4934, 'Wichita Falls, TX'],
					/*14*/[37.7749, -122.4194, 'San Francisco, CA']
				];
	var pipeRelationships = [
		//Bakersfield to Los Angeles
		{ID: 'C11', LatArray: [citys[0][0], citys[1][0]], LonArray: [citys[0][1], citys[1][1]], status: true, performance: 1, flowrate: 800},
		//Chicago to Cushing
		{ID: 'C12', LatArray: [citys[2][0], citys[3][0]], LonArray: [citys[2][1], citys[3][1]], status: true, performance: 1, flowrate: 575},
		//ClearBrook to Minneapolis
		{ID: 'C13', LatArray: [citys[4][0], citys[5][0]], LonArray: [citys[4][1], citys[5][1]], status: true, performance: 1, flowrate: 200},
		//ClearBrook to Bismarck
		{ID: 'C14', LatArray: [citys[4][0], citys[6][0]], LonArray: [citys[4][1], citys[6][1]], status: true, performance: 1, flowrate: 125},
		//Cushing to Wood River
		{ID: 'C15', LatArray: [citys[3][0], citys[7][0]], LonArray: [citys[3][1], citys[7][1]], status: true, performance: 1, flowrate: 275},
		//Dallas to Lima
		{ID: 'C16', LatArray: [citys[8][0], citys[9][0]], LonArray: [citys[8][1], citys[9][1]], status: true, performance: 1, flowrate: 250},
		//Guernsey to Chicago
		{ID: 'C18', LatArray: [citys[10][0], citys[2][0]], LonArray: [citys[10][1], citys[2][1]], status: true, performance: 1, flowrate: 800},
		//Guernsey to St. Louis
		{ID: 'C19', LatArray: [citys[10][0], citys[11][0]], LonArray: [citys[10][1], citys[11][1]], status: true, performance: 1, flowrate: 800},
		//Houston to Wichita Falls
		{ID: 'C20', LatArray: [citys[12][0], citys[13][0]], LonArray: [citys[12][1], citys[13][1]], status: true, performance: 1, flowrate: 800},
		//Los Angeles to San Franisco
		{ID: 'C22', LatArray: [citys[1][0], citys[14][0]], LonArray: [citys[1][1], citys[14][1]], status: true, performance: 1, flowrate: 425}
	];

	function createLines(pipeList){
		var pipeLines=[];
		//Create Markers object for each city
		for (var i=0; i< pipeList.length ; i++){
			pipeLines.push( {
		      id: pipeList[i].ID,
		      arc: 0,
		      alpha: 0.3,
		      color: "#0f0f00",
		      latitudes: pipeList[i].LatArray,
		      longitudes: pipeList[i].LonArray
	    
		    } );
		}
		return pipeLines;
	}
	var pipeLines = createLines(pipeRelationships);

	function createMarkers(citys, pipeList){
		var markers=[];
		var normVal = 1000;
		//Create Markers object for each city
		for (var i=0; i< citys.length ; i++){
			markers.push( {
		      id: citys[i][2],
		      svgPath: targetSVG,
		      title: citys[i][2],
		      latitude: citys[i][0],
		      longitude: citys[i][1],
		      scale: 0.5

		    } );
		}
		for (var j = 0; j< pipeList.length; j++) {
			markers.push({
			svgPath: targetSVG,
		      positionOnLine: 0,
		      color: "#FF0000",
		      alpha: 0.5,
		      animateAlongLine: pipeList[j].status,
		      animationDuration: normVal/(pipeList[j].flowrate*pipeList[j].performance),
		      lineId: pipeList[j].ID,
		      flipDirection: true,
		      loop: true,
		      scale: 0.3,
		      positionScale: 1
			});
		}
			
		return markers;
	}
	var markers = createMarkers(citys, pipeRelationships);
	//Create animations


	AmCharts.makeChart( "mapdiv", {
	  type: "map",
	  
	  dataProvider: {
	    "map": "worldLow",
	    "id": "vilnius",
        "color": "#000000",
        "svgPath": targetSVG,
        "title": "Vilnius",
        "latitude": 54.6896,
        "longitude": 25.2799,
        "scale": 1.5,
        "zoomLevel": 5,
        "zoomLongitude": -95,
        "zoomLatitude": 40,
        images: markers,
        lines: pipeLines
        
    }


	} );

	</script>
</body>
</html>